{"level":"error","message":"Payment processing error: Cannot read properties of undefined (reading 'paymentMethodId')","service":"restaurant-api","stack":"TypeError: Cannot read properties of undefined (reading 'paymentMethodId')\n    at processPayment (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/services/payment.js:21:38)\n    at createOrder (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/controllers/orderCon.js:276:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-19 02:11:20"}
{"level":"error","message":"Payment processing error: Cannot read properties of undefined (reading 'paymentMethodId')","service":"restaurant-api","stack":"TypeError: Cannot read properties of undefined (reading 'paymentMethodId')\n    at processPayment (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/services/payment.js:21:38)\n    at createOrder (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/controllers/orderCon.js:276:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-19 02:21:41"}
{"level":"error","message":"Payment processing error: Cannot read properties of undefined (reading 'paymentMethodId')","service":"restaurant-api","stack":"TypeError: Cannot read properties of undefined (reading 'paymentMethodId')\n    at processPayment (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/services/payment.js:21:38)\n    at createOrder (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/controllers/orderCon.js:276:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-19 02:21:45"}
{"headers":{"access-control-allow-credentials":"true","access-control-allow-methods":"GET, HEAD, PUT, PATCH, POST, DELETE","access-control-allow-origin":"*","access-control-expose-headers":"Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required","access-control-max-age":"300","cache-control":"no-cache, no-store","connection":"keep-alive","content-length":"596","content-security-policy":"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=cVUyJN3SyNG10jySPH3j-d4uW-W5zJUdJE3iZA2YJdvDxS_tUMjmLGUF8L2jwR5KVhamOCyJgAVpliku","content-type":"application/json","date":"Sat, 19 Apr 2025 20:39:47 GMT","idempotency-key":"stripe-node-retry-17693fa0-afcc-449c-b18f-9d33a6f34e3d","original-request":"req_sYVxWJb7f3QpPP","request-id":"req_sYVxWJb7f3QpPP","server":"nginx","strict-transport-security":"max-age=63072000; includeSubDomains; preload","stripe-should-retry":"false","stripe-version":"2025-03-31.basil","vary":"Origin","x-stripe-priority-routing-enabled":"true","x-stripe-routing-context-priority-tier":"api-testmode","x-wc":"ABGHI"},"level":"error","message":"Payment processing error: This PaymentIntent is configured to accept payment methods enabled in your Dashboard. Because some of these payment methods might redirect your customer off of your page, you must provide a `return_url`. If you don't want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents.","raw":{"headers":{"access-control-allow-credentials":"true","access-control-allow-methods":"GET, HEAD, PUT, PATCH, POST, DELETE","access-control-allow-origin":"*","access-control-expose-headers":"Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required","access-control-max-age":"300","cache-control":"no-cache, no-store","connection":"keep-alive","content-length":"596","content-security-policy":"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=cVUyJN3SyNG10jySPH3j-d4uW-W5zJUdJE3iZA2YJdvDxS_tUMjmLGUF8L2jwR5KVhamOCyJgAVpliku","content-type":"application/json","date":"Sat, 19 Apr 2025 20:39:47 GMT","idempotency-key":"stripe-node-retry-17693fa0-afcc-449c-b18f-9d33a6f34e3d","original-request":"req_sYVxWJb7f3QpPP","request-id":"req_sYVxWJb7f3QpPP","server":"nginx","strict-transport-security":"max-age=63072000; includeSubDomains; preload","stripe-should-retry":"false","stripe-version":"2025-03-31.basil","vary":"Origin","x-stripe-priority-routing-enabled":"true","x-stripe-routing-context-priority-tier":"api-testmode","x-wc":"ABGHI"},"message":"This PaymentIntent is configured to accept payment methods enabled in your Dashboard. Because some of these payment methods might redirect your customer off of your page, you must provide a `return_url`. If you don't want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents.","requestId":"req_sYVxWJb7f3QpPP","request_log_url":"https://dashboard.stripe.com/test/logs/req_sYVxWJb7f3QpPP?t=1745095187","statusCode":400,"type":"invalid_request_error"},"rawType":"invalid_request_error","requestId":"req_sYVxWJb7f3QpPP","service":"restaurant-api","stack":"Error: This PaymentIntent is configured to accept payment methods enabled in your Dashboard. Because some of these payment methods might redirect your customer off of your page, you must provide a `return_url`. If you don't want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents.\n    at generateV1Error (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/node_modules/stripe/esm/Error.js:8:20)\n    at res.toJSON.then.StripeAPIError.message (file:///Users/halfdee/Desktop/JAM-Hearts-Plates-H-and-P-Restaurant/node_modules/stripe/esm/RequestSender.js:105:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":400,"timestamp":"2025-04-19 20:39:47","type":"StripeInvalidRequestError"}
